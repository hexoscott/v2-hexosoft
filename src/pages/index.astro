---
import Layout from '../layouts/Layout.astro';

const stages = [
  {
    number: '01',
    title: 'Understand',
    description:
      'We start by listening. Tell us where things are hard, slow, or just not working. Together we explore your problem from every angle before a single line of code is considered.',
  },
  {
    number: '02',
    title: 'Agree',
    description:
      'We find the simplest solution that actually solves your problem — nothing more. We put it in front of you, talk it through, and only move forward when you\'re confident it\'s right.',
  },
  {
    number: '03',
    title: 'Deliver',
    description:
      'We build it, then we work alongside you to make it stick. Real feedback shapes the result. You stay involved until the software works the way your business needs it to.',
  },
];
---

<Layout title="Hexosoft — Build what matters.">
  <!-- Dot grid background -->
  <div class="dot-grid fixed inset-0 pointer-events-none" aria-hidden="true"></div>

  <!-- Sticky nav -->
  <header class="nav-bar fixed top-0 left-0 right-0 z-50 border-b border-slate-400/70">
    <nav class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
      <a
        href="/"
        class="font-display text-sm font-bold tracking-[0.2em] text-slate-800 uppercase hover:text-ion-blue transition-colors duration-200"
      >
        Hexosoft
      </a>
      <ul class="flex items-center gap-8">
        <li>
          <a href="#process" class="font-ui text-xs tracking-[0.15em] text-slate-700 hover:text-slate-900 uppercase transition-colors duration-200">
            Our Process
          </a>
        </li>
        <li>
          <a href="#case-studies" class="font-ui text-xs tracking-[0.15em] text-slate-700 hover:text-slate-900 uppercase transition-colors duration-200">
            Case Studies
          </a>
        </li>
        <li>
          <a href="#testimonials" class="font-ui text-xs tracking-[0.15em] text-slate-700 hover:text-slate-900 uppercase transition-colors duration-200">
            Testimonials
          </a>
        </li>
        <li>
          <a href="#contact" class="font-ui text-xs tracking-[0.15em] text-slate-700 hover:text-slate-900 uppercase transition-colors duration-200">
            Contact
          </a>
        </li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- Hero -->
    <section class="relative min-h-screen flex flex-col justify-center px-6 pt-16">
      <div class="max-w-7xl mx-auto w-full">

        <!-- Left accent line -->
        <div
          class="absolute left-0 md:left-6 top-1/4 bottom-1/4 w-px"
          style="background: linear-gradient(to bottom, transparent, #4fc3f7 40%, #4fc3f7 60%, transparent);"
          aria-hidden="true"
        ></div>

        <div class="pl-6 md:pl-12">
          <p class="hero-label font-ui text-sm font-semibold tracking-[0.2em] text-ion-blue uppercase mb-10">
            Software for your business
          </p>

          <h1 class="hero-headline font-display font-extrabold leading-[0.88] tracking-tight text-slate-900 uppercase"
              style="font-size: clamp(1.5rem, 6vw, 6rem);">
            Complexity<br />
            <span style="background: linear-gradient(135deg, #4fc3f7, #0284c7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
              simplified.
            </span>
          </h1>

          <p class="hero-sub font-ui text-sm leading-relaxed text-slate-700 mt-8 max-w-md">
              You already know the problem.<br/> Let's find out what software can do about it.
          </p>

          <div class="hero-ctas mt-12 flex flex-wrap gap-4">
            <a
              href="#process"
              class="inline-flex items-center gap-2 px-8 py-3.5 border border-slate-500 hover:border-slate-700 text-slate-700 hover:text-slate-900 font-ui text-xs tracking-[0.2em] uppercase transition-all duration-200"
            >
              Learn More
            </a>
            <a
              href="#contact"
              class="inline-flex items-center gap-2 px-8 py-3.5 bg-ion-blue hover:bg-ion-blue/80 text-slate-900 font-ui text-xs tracking-[0.2em] uppercase transition-all duration-200"
            >
              Contact Us
            </a>
          </div>
        </div>
      </div>

      <!-- Scroll indicator -->
      <div class="scroll-hint absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-3">
        <span class="font-ui text-[10px] tracking-[0.35em] text-slate-600 uppercase">Scroll</span>
        <div class="w-px h-10" style="background: linear-gradient(to bottom, #475569, transparent);"></div>
      </div>
    </section>

    <!-- Features -->
    <div class="px-6" aria-hidden="true">
      <div class="max-w-7xl mx-auto h-px" style="background: linear-gradient(to right, transparent, #4fc3f7 30%, #4fc3f7 70%, transparent);"></div>
    </div>

    <section id="process" class="relative py-32 px-6">
      <div class="max-w-7xl mx-auto">

        <div class="pl-6 md:pl-12 mb-16">
          <p class="font-ui text-sm font-semibold tracking-[0.2em] text-ion-blue uppercase mb-3">How we work</p>
          <h2 class="font-display text-4xl font-bold text-slate-900 uppercase tracking-tight">Our process</h2>
        </div>

        <!-- Cards: 1px gap between them acts as a divider -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-px bg-slate-400/50">
          {stages.map((stage) => (
            <article class="feature-card group bg-drift-silver hover:bg-slate-300/60 transition-colors duration-300 p-8 md:p-10">
              <span class="block font-display font-light leading-none text-slate-400 group-hover:text-ion-blue/30 transition-colors duration-300 mb-6 select-none"
                    style="font-size: 4rem;">
                {stage.number}
              </span>
              <div class="accent-bar w-8 h-px bg-ion-blue mb-6 transition-all duration-300"></div>
              <h3 class="font-display text-base font-semibold text-slate-900 uppercase tracking-widest mb-3">
                {stage.title}
              </h3>
              <p class="font-ui text-sm text-slate-700 leading-relaxed group-hover:text-slate-900 transition-colors duration-300">
                {stage.description}
              </p>
            </article>
          ))}
        </div>

      </div>
    </section>

    <!-- Case Study: Prefix -->
    <div class="px-6" aria-hidden="true">
      <div class="max-w-7xl mx-auto h-px" style="background: linear-gradient(to right, transparent, #4fc3f7 30%, #4fc3f7 70%, transparent);"></div>
    </div>

    <section id="case-studies" class="relative py-32 px-6">
      <div class="max-w-7xl mx-auto">

        <div class="pl-6 md:pl-12 mb-16">
          <p class="font-ui text-sm font-semibold tracking-[0.2em] text-ion-blue uppercase mb-3">Case Study</p>
          <h2 class="font-display text-4xl font-bold text-slate-900 uppercase tracking-tight">Prefix</h2>
        </div>

        <div class="border-t border-slate-400/50 grid grid-cols-1 lg:grid-cols-5 gap-px bg-slate-400/50">

          <!-- Challenge -->
          <div class="case-block lg:col-span-2 bg-drift-silver p-8 md:p-10">
            <p class="font-ui text-sm font-semibold tracking-[0.15em] text-ion-blue uppercase mb-5">The challenge</p>
            <p class="font-display text-2xl font-semibold text-slate-900 leading-snug mb-6">
              A manufacturing business outgrowing a system held together with spreadsheets and an Access database.
            </p>
            <p class="font-ui text-sm text-slate-700 leading-relaxed">
              Prefix had built their operation on Microsoft Access. It had served its purpose — but as the business grew, the cracks showed. Stock was hard to trust, the factory floor ran on paper, customers received inconsistent documentation, and production scheduling was a daily guessing game. They needed a platform built around how they actually work.
            </p>
          </div>

          <!-- What we built -->
          <div class="case-block lg:col-span-3 bg-drift-silver p-8 md:p-10">
            <p class="font-ui text-sm font-semibold tracking-[0.15em] text-ion-blue uppercase mb-5">What we built</p>
            <ul class="space-y-0 divide-y divide-slate-400/40">
              {[
                {
                  label: 'Web-based ERP / MRP',
                  detail: 'Replaced MS Access entirely with a purpose-built system covering orders, materials, and production — accessible from anywhere in the business on desktop/mobile/tablet via any web browser.',
                },
                {
                  label: 'Barcoded stock control',
                  detail: 'Every product on the factory floor gets a barcode. Goods out and stock movements are scanned in real time on Android scanners — no more manual counts or mystery shortages. Prefix know what product to load onto which vehicle and see it in real time.',
                },
                {
                  label: 'Delivery visibility',
                  detail: 'Live delivery scheduling and printable reports, so the team always knows what\'s arriving, what\'s shipped, and what\'s outstanding.',
                },
                {
                  label: 'Modern customer paperwork',
                  detail: 'Order confirmations and delivery notes generated automatically — consistent, branded, and sent without manual effort.',
                },
                {
                  label: 'Production insights & scheduling',
                  detail: 'A clear view of capacity, work in progress, and what needs to happen next — turning scheduling from guesswork into a simple process.  Each process on the factory floor mapped out and capacity managed.',
                },
                {
                  label: 'Ancillary software',
                  detail: 'Simple tools to convert files for CNC machines between different systems'
                }
              ].map((item) => (
                <li class="case-item group flex gap-5 py-5">
                  <span class="mt-0.5 flex-shrink-0 w-4 h-4 rounded-full border border-ion-blue flex items-center justify-center">
                    <span class="w-1.5 h-1.5 rounded-full bg-ion-blue"></span>
                  </span>
                  <div>
                    <p class="font-display text-sm font-semibold text-slate-900 uppercase tracking-wide mb-1">{item.label}</p>
                    <p class="font-ui text-sm text-slate-700 leading-relaxed">{item.detail}</p>
                  </div>
                </li>
              ))}
            </ul>
          </div>

        </div>

      </div>
    </section>
    <!-- Testimonials -->
    <div class="px-6" aria-hidden="true">
      <div class="max-w-7xl mx-auto h-px" style="background: linear-gradient(to right, transparent, #4fc3f7 30%, #4fc3f7 70%, transparent);"></div>
    </div>

    <section id="testimonials" class="relative py-32 px-6">
      <div class="max-w-7xl mx-auto">

        <div class="pl-6 md:pl-12 mb-16">
          <p class="font-ui text-sm font-semibold tracking-[0.2em] text-ion-blue uppercase mb-3">In their words</p>
          <h2 class="font-display text-4xl font-bold text-slate-900 uppercase tracking-tight">What clients say</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-px bg-slate-400/50">

          <blockquote class="testimonial-card bg-drift-silver p-8 md:p-10 flex flex-col gap-8">
            <p class="font-display text-xl font-semibold text-slate-900 leading-snug">
              &ldquo;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua — replace this with a real testimonial.&rdquo;
            </p>
            <footer class="mt-auto flex items-center gap-4">
              <div class="w-8 h-px bg-ion-blue flex-shrink-0"></div>
              <div>
                <p class="font-display text-sm font-semibold text-slate-900 uppercase tracking-wide">Client Name</p>
                <p class="font-ui text-xs text-slate-600 mt-0.5">Job Title, Company</p>
              </div>
            </footer>
          </blockquote>

          <blockquote class="testimonial-card bg-drift-silver p-8 md:p-10 flex flex-col gap-8">
            <p class="font-display text-xl font-semibold text-slate-900 leading-snug">
              &ldquo;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat — replace this with a real testimonial.&rdquo;
            </p>
            <footer class="mt-auto flex items-center gap-4">
              <div class="w-8 h-px bg-ion-blue flex-shrink-0"></div>
              <div>
                <p class="font-display text-sm font-semibold text-slate-900 uppercase tracking-wide">Client Name</p>
                <p class="font-ui text-xs text-slate-600 mt-0.5">Job Title, Company</p>
              </div>
            </footer>
          </blockquote>

        </div>

      </div>
    </section>

    <div class="px-6" aria-hidden="true">
      <div class="max-w-7xl mx-auto h-px" style="background: linear-gradient(to right, transparent, #4fc3f7 30%, #4fc3f7 70%, transparent);"></div>
    </div>

    <!-- Contact -->
    <section id="contact" class="relative py-32 px-6">
      <div class="max-w-7xl mx-auto">

        <div class="pl-6 md:pl-12 mb-16">
          <p class="font-ui text-sm font-semibold tracking-[0.2em] text-ion-blue uppercase mb-3">Get in touch</p>
          <h2 class="font-display text-4xl font-bold text-slate-900 uppercase tracking-tight">Contact</h2>
        </div>

        <div class="pl-6 md:pl-12 max-w-2xl">

          <!-- Form -->
          <div id="contact-form-wrapper">
            <form
              id="contact-form"
              name="contact"
              method="POST"
              data-netlify="true"
              class="space-y-6"
            >
              <input type="hidden" name="form-name" value="contact" />

              <div class="space-y-2">
                <label for="name" class="font-ui text-sm font-medium text-slate-900 block">Name</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  placeholder="Your name"
                  class="w-full h-10 border border-slate-300 bg-slate-100 px-3 font-ui text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-ion-blue focus:border-transparent transition-colors"
                />
              </div>

              <div class="space-y-2">
                <label for="email" class="font-ui text-sm font-medium text-slate-900 block">Email</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  placeholder="you@example.com"
                  class="w-full h-10 border border-slate-300 bg-slate-100 px-3 font-ui text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-ion-blue focus:border-transparent transition-colors"
                />
              </div>

              <div class="space-y-2">
                <label for="phone" class="font-ui text-sm font-medium text-slate-900 block">
                  Phone <span class="text-slate-400 font-normal">(optional)</span>
                </label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  placeholder="+44 7700 000000"
                  class="w-full h-10 border border-slate-300 bg-slate-100 px-3 font-ui text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-ion-blue focus:border-transparent transition-colors"
                />
              </div>

              <div class="space-y-2">
                <label for="message" class="font-ui text-sm font-medium text-slate-900 block">Message</label>
                <textarea
                  id="message"
                  name="message"
                  required
                  rows="5"
                  placeholder="Tell us about your problem..."
                  class="w-full border border-slate-300 bg-slate-100 px-3 py-2 font-ui text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-ion-blue focus:border-transparent transition-colors resize-none"
                ></textarea>
              </div>

              <button
                type="submit"
                class="inline-flex items-center gap-2 px-8 py-3.5 bg-ion-blue hover:bg-ion-blue/80 text-slate-900 font-ui text-xs tracking-[0.2em] uppercase transition-all duration-200 cursor-pointer"
              >
                Send Message
              </button>
            </form>
          </div>

          <!-- Thank you (shown after submission) -->
          <div id="contact-thankyou" class="hidden py-12 flex flex-col gap-6">
            <h3 class="font-display text-2xl font-bold text-slate-900 uppercase">Thank you</h3>
            <p class="font-ui text-sm text-slate-700 leading-relaxed max-w-sm">
              Your message has been received. We'll be in touch shortly.
            </p>
          </div>

        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="border-t border-slate-400/70 py-8 px-6">
    <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3">
      <span class="font-display text-xs font-bold tracking-[0.2em] text-slate-600 uppercase">Hexosoft</span>
      <p class="font-ui text-xs text-slate-600">
        &copy; {new Date().getFullYear()} Hexosoft. All rights reserved.
      </p>
    </div>
  </footer>
</Layout>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement | null;
  const wrapper = document.getElementById('contact-form-wrapper');
  const thankyou = document.getElementById('contact-thankyou');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const params = new URLSearchParams();
    formData.forEach((value, key) => params.append(key, value.toString()));

    try {
      await fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: params.toString(),
      });
    } catch {
      // Submission may still succeed even if fetch throws (e.g. redirect)
    } finally {
      wrapper?.classList.add('hidden');
      thankyou?.classList.remove('hidden');
    }
  });
</script>

<style>
  /* ─── Custom font families ─────────────────────────────────── */
  .font-display { font-family: 'Syne', sans-serif; }
  .font-ui      { font-family: 'JetBrains Mono', monospace; }

  /* ─── Dot-grid background ──────────────────────────────────── */
  .dot-grid {
    background-image: radial-gradient(circle, rgba(79, 195, 247, 0.18) 1px, transparent 1px);
    background-size: 28px 28px;
  }

  /* ─── Nav backdrop blur ────────────────────────────────────── */
  .nav-bar {
    background-color: rgba(221, 227, 234, 0.82);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  /* ─── Feature card hover accent bar expand ─────────────────── */
  .feature-card:hover .accent-bar {
    width: 3rem;
  }

  /* ─── Staggered hero entrance animations ───────────────────── */
  @keyframes fade-up {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  .hero-label {
    opacity: 0;
    animation: fade-up 0.55s ease forwards;
    animation-delay: 0.1s;
  }

  .hero-headline {
    opacity: 0;
    animation: fade-up 0.6s ease forwards;
    animation-delay: 0.25s;
  }

  .hero-sub {
    opacity: 0;
    animation: fade-up 0.6s ease forwards;
    animation-delay: 0.4s;
  }

  .hero-ctas {
    opacity: 0;
    animation: fade-up 0.6s ease forwards;
    animation-delay: 0.55s;
  }

  .scroll-hint {
    opacity: 0;
    animation: fade-in 0.8s ease forwards;
    animation-delay: 1.1s;
  }

  /* ─── Feature card staggered entrance ──────────────────────── */
  .feature-card {
    opacity: 0;
    animation: fade-up 0.55s ease forwards;
  }

  .feature-card:nth-child(1) { animation-delay: 0.05s; }
  .feature-card:nth-child(2) { animation-delay: 0.15s; }
  .feature-card:nth-child(3) { animation-delay: 0.25s; }

  /* ─── Case study entrance ───────────────────────────────────── */
  .case-block {
    opacity: 0;
    animation: fade-up 0.55s ease forwards;
  }

  .case-block:nth-child(1) { animation-delay: 0.1s; }
  .case-block:nth-child(2) { animation-delay: 0.22s; }

  /* ─── Testimonial card entrance ─────────────────────────────── */
  .testimonial-card {
    opacity: 0;
    animation: fade-up 0.55s ease forwards;
  }

  .testimonial-card:nth-child(1) { animation-delay: 0.1s; }
  .testimonial-card:nth-child(2) { animation-delay: 0.22s; }
</style>
