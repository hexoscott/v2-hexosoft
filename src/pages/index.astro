---
import Layout from '../layouts/Layout.astro';
import Nav from '../components/Nav.astro';

const stages = [
  {
    number: '01',
    title: 'Understand',
    description:
      'We start by listening. Tell us where things are hard, slow, or just not working. Together we explore your problem from every angle before a single line of code is considered.',
  },
  {
    number: '02',
    title: 'Agree',
    description:
      'We find the simplest solution that actually solves your problem — nothing more. We put it in front of you, talk it through, and only move forward when you\'re confident it\'s right.',
  },
  {
    number: '03',
    title: 'Deliver',
    description:
      'We build it, then we work alongside you to make it stick. Real feedback shapes the result. You stay involved until the software works the way your business needs it to.',
  },
];
---

<Layout title="Hexosoft — Build what matters.">
  <div class="dot-grid fixed inset-0 pointer-events-none" aria-hidden="true"></div>

  <Nav />

  <main>
    <!-- Hero -->
    <section class="relative min-h-screen flex flex-col justify-center px-6 pt-16">
      <div class="page-container w-full">

        <!-- Left accent line -->
        <div
          class="absolute left-0 md:left-6 top-1/4 bottom-1/4 w-px"
          style="background: linear-gradient(to bottom, transparent, var(--color-ion-blue) 40%, var(--color-ion-blue) 60%, transparent);"
          aria-hidden="true"
        ></div>

        <div class="section-indent">
          <p class="hero-label label-overline mb-10">
            Software for your business
          </p>

          <h1 class="hero-headline font-display font-extrabold leading-[0.88] tracking-tight text-slate-900 uppercase"
              style="font-size: clamp(1.5rem, 6vw, 6rem);">
            Complexity<br />
            <span style="background: linear-gradient(to right, #075985, var(--color-ion-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
              simplified.
            </span>
          </h1>

          <p class="hero-sub font-ui text-sm leading-relaxed text-slate-700 mt-8 max-w-md">
            You already know the problem.<br/> Let's find out what software can do about it.
          </p>

          <div class="hero-ctas mt-12 flex flex-wrap gap-4">
            <a href="#process"  class="btn-secondary">Learn More</a>
            <a href="#contact"  class="btn-primary">Contact Us</a>
          </div>
        </div>
      </div>

      <!-- Scroll indicator -->
      <div class="scroll-hint absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-3">
        <span class="font-ui text-[10px] tracking-[0.35em] text-slate-600 uppercase">Scroll</span>
        <div class="w-px h-10" style="background: linear-gradient(to bottom, #475569, transparent);"></div>
      </div>
    </section>

    <!-- Section divider -->
    <div class="px-6" aria-hidden="true">
      <div class="page-container h-px" style="background: linear-gradient(to right, transparent, var(--color-ion-blue) 30%, var(--color-ion-blue) 70%, transparent);"></div>
    </div>

    <!-- Process -->
    <section id="process" class="page-section">
      <div class="page-container">
        <div class="section-header">
          <p class="label-overline mb-3">How we work</p>
          <h2 class="section-heading">Our process</h2>
        </div>
        <div class="card-grid md:grid-cols-3">
          {stages.map((stage) => (
            <article class="feature-card group card-surface">
              <span class="block font-display font-light leading-none text-slate-400 group-hover:text-ion-blue/30 transition-colors duration-300 mb-6 select-none"
                    style="font-size: 4rem;">
                {stage.number}
              </span>
              <div class="accent-bar w-8 h-px bg-ion-blue mb-6 transition-all duration-300"></div>
              <h3 class="font-display text-base font-semibold text-slate-900 uppercase tracking-widest mb-3">
                {stage.title}
              </h3>
              <p class="font-ui text-sm text-slate-700 leading-relaxed group-hover:text-slate-900 transition-colors duration-300">
                {stage.description}
              </p>
            </article>
          ))}
        </div>
      </div>
    </section>

    <!-- Section divider -->
    <div class="px-6" aria-hidden="true">
      <div class="page-container h-px" style="background: linear-gradient(to right, transparent, var(--color-ion-blue) 30%, var(--color-ion-blue) 70%, transparent);"></div>
    </div>

    <!-- Case Study: Prefix -->
    <section id="case-studies" class="page-section">
      <div class="page-container">
        <div class="section-header">
          <p class="label-overline mb-3">Case Study</p>
          <h2 class="section-heading">Prefix</h2>
        </div>
        <div class="border-t border-slate-400/50 card-grid lg:grid-cols-5">

          <!-- Challenge -->
          <div class="case-block lg:col-span-2 bg-drift-silver p-8 md:p-10">
            <p class="label-overline tracking-[0.15em] mb-5">The challenge</p>
            <p class="font-display text-2xl font-semibold text-slate-900 leading-snug mb-6">
              A manufacturing business outgrowing a system held together with spreadsheets and an Access database.
            </p>
            <p class="font-ui text-sm text-slate-700 leading-relaxed">
              Prefix had built their operation on Microsoft Access. It had served its purpose — but as the business grew, the cracks showed. Stock was hard to trust, the factory floor ran on paper, customers received inconsistent documentation, and production scheduling was a daily guessing game. They needed a platform built around how they actually work.
            </p>
          </div>

          <!-- What we achieved -->
          <div class="case-block lg:col-span-3 bg-drift-silver p-8 md:p-10">
            <p class="label-overline tracking-[0.15em] mb-5">What we achieved</p>
            <ul class="space-y-0 divide-y divide-slate-400/40">
              {[
                {
                  label: 'Web-based ERP / MRP',
                  detail: 'Replaced MS Access entirely with a purpose-built system covering orders, materials, and production — accessible from anywhere in the business on desktop/mobile/tablet via any web browser.',
                },
                {
                  label: 'Barcoded stock control',
                  detail: 'Every product on the factory floor gets a barcode. Goods out and stock movements are scanned in real time on Android scanners — no more manual counts or mystery shortages. Prefix know what product to load onto which vehicle and see it in real time.',
                },
                {
                  label: 'Delivery visibility',
                  detail: 'Live delivery scheduling and printable reports, so the team always knows what\'s arriving, what\'s shipped, and what\'s outstanding.',
                },
                {
                  label: 'Modern customer paperwork',
                  detail: 'Order confirmations and delivery notes generated automatically — consistent, branded, and sent without manual effort.',
                },
                {
                  label: 'Production insights & scheduling',
                  detail: 'A clear view of capacity, work in progress, and what needs to happen next — turning scheduling from guesswork into a simple process. Each process on the factory floor mapped out and capacity managed.',
                },
                {
                  label: 'Ancillary software',
                  detail: 'Simple tools to convert files for CNC machines between different systems.',
                },
              ].map((item) => (
                <li class="case-item group flex gap-5 py-5">
                  <span class="mt-0.5 flex-shrink-0 w-4 h-4 rounded-full border border-ion-blue flex items-center justify-center">
                    <span class="w-1.5 h-1.5 rounded-full bg-ion-blue"></span>
                  </span>
                  <div>
                    <p class="font-display text-sm font-semibold text-slate-900 uppercase tracking-wide mb-1">{item.label}</p>
                    <p class="font-ui text-sm text-slate-700 leading-relaxed">{item.detail}</p>
                  </div>
                </li>
              ))}
            </ul>
          </div>

        </div>
      </div>
    </section>

    <!-- Section divider -->
    <div class="px-6" aria-hidden="true">
      <div class="page-container h-px" style="background: linear-gradient(to right, transparent, var(--color-ion-blue) 30%, var(--color-ion-blue) 70%, transparent);"></div>
    </div>

    <!-- Testimonials -->
    <section id="testimonials" class="page-section">
      <div class="page-container">
        <div class="section-header">
          <p class="label-overline mb-3">In their words</p>
          <h2 class="section-heading">What clients say</h2>
        </div>
        <div class="card-grid md:grid-cols-2">

          <blockquote class="testimonial-card card-surface flex flex-col gap-8">
            <p class="font-display text-xl font-semibold text-slate-900 leading-snug">
              &ldquo;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua — replace this with a real testimonial.&rdquo;
            </p>
            <footer class="mt-auto flex items-center gap-4">
              <div class="w-8 h-px bg-ion-blue flex-shrink-0"></div>
              <div>
                <p class="font-display text-sm font-semibold text-slate-900 uppercase tracking-wide">Client Name</p>
                <p class="font-ui text-xs text-slate-600 mt-0.5">Job Title, Company</p>
              </div>
            </footer>
          </blockquote>

          <blockquote class="testimonial-card card-surface flex flex-col gap-8">
            <p class="font-display text-xl font-semibold text-slate-900 leading-snug">
              &ldquo;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat — replace this with a real testimonial.&rdquo;
            </p>
            <footer class="mt-auto flex items-center gap-4">
              <div class="w-8 h-px bg-ion-blue flex-shrink-0"></div>
              <div>
                <p class="font-display text-sm font-semibold text-slate-900 uppercase tracking-wide">Client Name</p>
                <p class="font-ui text-xs text-slate-600 mt-0.5">Job Title, Company</p>
              </div>
            </footer>
          </blockquote>

        </div>
      </div>
    </section>

    <!-- Section divider -->
    <div class="px-6" aria-hidden="true">
      <div class="page-container h-px" style="background: linear-gradient(to right, transparent, var(--color-ion-blue) 30%, var(--color-ion-blue) 70%, transparent);"></div>
    </div>

    <!-- Contact -->
    <section id="contact" class="page-section">
      <div class="page-container">
        <div class="section-header">
          <p class="label-overline mb-3">Get in touch</p>
          <h2 class="section-heading">Contact</h2>
        </div>

        <div class="section-indent max-w-4xl">

          <!-- Form -->
          <div id="contact-form-wrapper">
            <form
              id="contact-form"
              name="contact"
              method="POST"
              data-netlify="true"
              class="space-y-6"
            >
              <input type="hidden" name="form-name" value="contact" />

              <div class="flex flex-col md:flex-row gap-6">
                <div class="space-y-2 flex-1">
                  <label for="name" class="form-label">Name</label>
                  <input type="text" id="name" name="name" required placeholder="Your name"
                    class="form-input h-10" />
                </div>

                <div class="space-y-2 flex-1">
                  <label for="email" class="form-label">Email</label>
                  <input type="email" id="email" name="email" required placeholder="you@example.com"
                    class="form-input h-10" />
                </div>

                <div class="space-y-2 flex-1">
                  <label for="phone" class="form-label">
                    Phone <span class="text-slate-400 font-normal">(optional)</span>
                  </label>
                  <input type="tel" id="phone" name="phone" placeholder="+44 7700 000000"
                    class="form-input h-10" />
                </div>
              </div>

              <div class="space-y-2">
                <label for="message" class="form-label">Message</label>
                <textarea id="message" name="message" required rows="5"
                  placeholder="Tell us about your problem..."
                  class="form-input py-2 resize-none"></textarea>
              </div>

              <button type="submit" class="btn-primary cursor-pointer">
                Send Message
              </button>
            </form>
          </div>

          <!-- Thank you (shown after submission) -->
          <div id="contact-thankyou" class="hidden py-12 flex flex-col gap-6">
            <h3 class="font-display text-2xl font-bold text-slate-900 uppercase">Thank you</h3>
            <p class="font-ui text-sm text-slate-700 leading-relaxed max-w-sm">
              Your message has been received. We'll be in touch shortly.
            </p>
          </div>

        </div>
      </div>
    </section>
  </main>

  <footer class="border-t border-slate-400/70 py-8 px-6">
    <div class="page-container flex flex-col sm:flex-row items-center justify-between gap-3">
      <span class="footer-brand">Hexosoft</span>
      <p class="footer-text">&copy; {new Date().getFullYear()} Hexosoft. All rights reserved.</p>
    </div>
  </footer>
</Layout>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement | null;
  const wrapper = document.getElementById('contact-form-wrapper');
  const thankyou = document.getElementById('contact-thankyou');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const params = new URLSearchParams();
    formData.forEach((value, key) => params.append(key, value.toString()));

    try {
      await fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: params.toString(),
      });
    } catch {
      // Submission may still succeed even if fetch throws (e.g. redirect)
    } finally {
      wrapper?.classList.add('hidden');
      thankyou?.classList.remove('hidden');
    }
  });
</script>

<style>
  /* ─── Feature card hover accent bar expand ─────────────────── */
  .feature-card:hover .accent-bar {
    width: 3rem;
  }

  /* ─── Staggered hero entrance animations ───────────────────── */
  @keyframes fade-up {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  .hero-label    { opacity: 0; animation: fade-up 0.55s ease forwards; animation-delay: 0.1s; }
  .hero-headline { opacity: 0; animation: fade-up 0.6s ease forwards;  animation-delay: 0.25s; }
  .hero-sub      { opacity: 0; animation: fade-up 0.6s ease forwards;  animation-delay: 0.4s; }
  .hero-ctas     { opacity: 0; animation: fade-up 0.6s ease forwards;  animation-delay: 0.55s; }

  .scroll-hint { opacity: 0; animation: fade-in 0.8s ease forwards; animation-delay: 1.1s; }

  /* ─── Staggered card entrances ──────────────────────────────── */
  .feature-card, .case-block, .testimonial-card {
    opacity: 0;
    animation: fade-up 0.55s ease forwards;
  }

  .feature-card:nth-child(1)    { animation-delay: 0.05s; }
  .feature-card:nth-child(2)    { animation-delay: 0.15s; }
  .feature-card:nth-child(3)    { animation-delay: 0.25s; }
  .case-block:nth-child(1)      { animation-delay: 0.1s; }
  .case-block:nth-child(2)      { animation-delay: 0.22s; }
  .testimonial-card:nth-child(1){ animation-delay: 0.1s; }
  .testimonial-card:nth-child(2){ animation-delay: 0.22s; }
</style>
